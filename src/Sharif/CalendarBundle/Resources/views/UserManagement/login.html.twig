{% extends "SharifCalendarBundle::baseHtml.html.twig" %}

{% block stylesheets %}
	<style>
		.cute-icon {
			cursor: pointer;
			height: 50px;
		}
		.cute-button {
			display: inline-block;
		}
	</style>
{% endblock stylesheets %}

{% block body %}
	{# logout option #}
	<div>
		{% if is_granted("ROLE_USER") %}
			{{ 'already_logged_in'|trans|humanize }}:
			<a href="{{ path('fp_openid_security_logout') }}">
				{{ 'logout'|trans|humanize }}
			</a>
		{% endif %}
	</div>

	{# errors #}
	<div>
		{% if error %}
			<div>{{ error }}</div>
		{% endif %}
	</div>

	{# messages #}
	<div>
		{% for key, message in app.session.getFlashes() %}
			<div class="{{ key }}">
				{{ message }}
			</div>
		{% endfor %}
	</div>

	{# forms #}
	<div>
		<form action="{{ path('sharif_calendar_login_check') }}" method="post">
			<label for="username"> User name </label>
			<input type="text" id="username" name="_user"" />
			<br />
			<label for="password"> Password </label>
			<input type="password" id="password" name="_password" />
			<br />
			<label for="remember_me"> Keep me logged in </label>
			<input type="checkbox" name="_remember_me" id="remember_me" />
			<br />
			<input type="submit" value="Login" />
		</form>

		<hr />

		<form id="fp_openid_login"
				action="{{ path("fp_openid_security_check") }}"
				method="post">
			<div id="cute-button-container">
				<div id="yahoo-cute-button" class="cute-button">
					<img class="cute-icon" src="{{ app.request.getSchemeAndHttpHost() }}{{ '/src/Sharif/CalendarBundle/Resources/public/images/yahoo-logo.png' }}">
				</div>
				<div id="google-cute-button" class="cute-button">
					<img class="cute-icon" src="{{ app.request.getSchemeAndHttpHost() }}{{ '/src/Sharif/CalendarBundle/Resources/public/images/google-logo.png' }}">
				</div>
			</div>

			<label for="openid_identifier">Identifier: </label>
			<input type="text" id="openid_identifier"
					name="openid_identifier"
					value="" />
			<br />
			<label for="remember_me">Keep me logged in</label>
			<input type="checkbox"
					id="remember_me"
					name="_remember_me"
					checked="checked" />
			<br />
			<input type="submit" id="_submit" name="_submit" value="Login" />
			<input type="hidden"
					id="target_path"
					name="_target_path"
					value="" />
		</form>
	</div>

	<a href="{{ path('sharif_calendar_signup') }}">
		{{ 'signup'|trans|humanize }}
	</a>
{% endblock body %}

{% block javascripts %}
	{{ parent() }}
	<script>
		$('#yahoo-cute-button').click(function(e) {
			$('#openid_identifier').val('http://me.yahoo.com/');
			$('#fp_openid_login').submit();
		});
		$('#google-cute-button').click(function(e) {
			$('#openid_identifier').
					val('https://www.google.com/accounts/o8/id');
			$('#fp_openid_login').submit();
		});
	</script>
{% endblock javascripts %}
